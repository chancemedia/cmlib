<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CMLIB: CMVItem.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>CMVItem.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 include_once(<span class="stringliteral">&#39;CMObject.php&#39;</span>);
<a name="l00004"></a>00004 
<a name="l00010"></a><a class="code" href="class_c_m_v_item.html">00010</a> <span class="keyword">class </span><a class="code" href="class_c_m_v_item.html" title="Used by CMVCalendar.">CMVItem</a> <span class="keyword">implements</span> <a class="code" href="interface_c_m_object.html" title="Object parent class.">CMObject</a> {
<a name="l00011"></a>00011  
<a name="l00016"></a><a class="code" href="class_c_m_v_item.html#a9a4a6fba2208984cabb3afacadf33919">00016</a>  <span class="keyword">public</span> <a class="code" href="class_c_m_v_item.html#a9a4a6fba2208984cabb3afacadf33919" title="The type of item. Official types include &amp;quot;VEVENT&amp;quot;, &amp;quot;VTODO&amp;quot;, &amp;quot;VJOURNAL&amp;quot;...">$type</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00017"></a>00017  
<a name="l00022"></a><a class="code" href="class_c_m_v_item.html#a0b41385738b43ee6b8668650e7a4c990">00022</a>  <span class="keyword">public</span> <a class="code" href="class_c_m_v_item.html#a0b41385738b43ee6b8668650e7a4c990" title="Attributes. See Properties.">$attr</a> = array();
<a name="l00023"></a>00023  
<a name="l00028"></a><a class="code" href="class_c_m_v_item.html#aafda1a84fe840800c9884c167093f759">00028</a>  <span class="keyword">public</span> <a class="code" href="class_c_m_v_item.html#aafda1a84fe840800c9884c167093f759" title="Sub-items. This is often used for VALARM.">$children</a> = array();
<a name="l00029"></a>00029  
<a name="l00035"></a><a class="code" href="class_c_m_v_item.html#a3ae0d689000afa717bbc691f759bfcbc">00035</a>  <span class="keyword">public</span> function <a class="code" href="class_c_m_v_item.html#a3ae0d689000afa717bbc691f759bfcbc" title="Create a CMVItem of a given type.">CMVItem</a>(<a class="code" href="class_c_m_v_item.html#a9a4a6fba2208984cabb3afacadf33919" title="The type of item. Official types include &amp;quot;VEVENT&amp;quot;, &amp;quot;VTODO&amp;quot;, &amp;quot;VJOURNAL&amp;quot;...">$type</a>) {
<a name="l00036"></a>00036   $this-&gt;type = strtoupper(<a class="code" href="class_c_m_v_item.html#a9a4a6fba2208984cabb3afacadf33919" title="The type of item. Official types include &amp;quot;VEVENT&amp;quot;, &amp;quot;VTODO&amp;quot;, &amp;quot;VJOURNAL&amp;quot;...">$type</a>);
<a name="l00037"></a>00037  }
<a name="l00038"></a>00038  
<a name="l00048"></a><a class="code" href="class_c_m_v_item.html#aab87b4a99352a758a93a1302b9c1fc0d">00048</a>  <span class="keyword">public</span> function <a class="code" href="class_c_m_v_item.html#aab87b4a99352a758a93a1302b9c1fc0d" title="Add an attribute.">addAttribute</a>(<a class="code" href="class_c_m_v_item.html#a0b41385738b43ee6b8668650e7a4c990" title="Attributes. See Properties.">$attr</a>, $value, $a = array()) {
<a name="l00049"></a>00049   $add = array(<span class="stringliteral">&#39;VALUE&#39;</span> =&gt; $value);
<a name="l00050"></a>00050   <span class="keywordflow">foreach</span>($a as $k =&gt; $v)
<a name="l00051"></a>00051    $add[strtoupper($k)] = $v;
<a name="l00052"></a>00052   $this-&gt;attr[strtoupper(<a class="code" href="class_c_m_v_item.html#a0b41385738b43ee6b8668650e7a4c990" title="Attributes. See Properties.">$attr</a>)][] = $add;
<a name="l00053"></a>00053   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00054"></a>00054  }
<a name="l00055"></a>00055  
<a name="l00059"></a><a class="code" href="class_c_m_v_item.html#a7516ca30af0db3cdbf9a7739b48ce91d">00059</a>  <span class="keyword">public</span> function <a class="code" href="class_c_m_v_item.html#a7516ca30af0db3cdbf9a7739b48ce91d" title="Return the string value of this object.">__toString</a>() {
<a name="l00060"></a>00060   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;&quot;</span> . get_class($this) . <span class="stringliteral">&quot;&gt;&quot;</span>;
<a name="l00061"></a>00061  }
<a name="l00062"></a>00062  
<a name="l00072"></a><a class="code" href="class_c_m_v_item.html#a78751dbc7e9ac99e0d5f7fe9cf1583b3">00072</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_v_item.html#a78751dbc7e9ac99e0d5f7fe9cf1583b3" title="Create iCal VEVENT.">CreateEvent</a>($start, $end, $summary, $description, $a = array()) {
<a name="l00073"></a>00073   <span class="comment">// turn keys uppercase</span>
<a name="l00074"></a>00074   <span class="keywordflow">foreach</span>($a as $k =&gt; $v)
<a name="l00075"></a>00075    $a[strtoupper($k)] = $v;
<a name="l00076"></a>00076   
<a name="l00077"></a>00077   <span class="keywordflow">if</span>(is_numeric($start))
<a name="l00078"></a>00078    $a[<span class="stringliteral">&#39;DTSTART&#39;</span>] = @date(<span class="stringliteral">&#39;Ymd&#39;</span>, $start) . <span class="charliteral">&#39;T&#39;</span> . @date(<span class="stringliteral">&#39;His&#39;</span>, $start);
<a name="l00079"></a>00079   <span class="keywordflow">else</span>
<a name="l00080"></a>00080    $a[<span class="stringliteral">&#39;DTSTART&#39;</span>] = $start;
<a name="l00081"></a>00081    
<a name="l00082"></a>00082   <span class="keywordflow">if</span>(is_numeric($end))
<a name="l00083"></a>00083    $a[<span class="stringliteral">&#39;DTEND&#39;</span>] = @date(<span class="stringliteral">&#39;Ymd&#39;</span>, $end) . <span class="charliteral">&#39;T&#39;</span> . @date(<span class="stringliteral">&#39;His&#39;</span>, $end);
<a name="l00084"></a>00084   <span class="keywordflow">else</span>
<a name="l00085"></a>00085    $a[<span class="stringliteral">&#39;DTEND&#39;</span>] = $end;
<a name="l00086"></a>00086    
<a name="l00087"></a>00087   $a[<span class="stringliteral">&#39;SUMMARY&#39;</span>] = $summary;
<a name="l00088"></a>00088   $a[<span class="stringliteral">&#39;DESCRIPTION&#39;</span>] = $description;
<a name="l00089"></a>00089   
<a name="l00090"></a>00090   <span class="comment">// required by Outlook</span>
<a name="l00091"></a>00091   $a[<span class="stringliteral">&#39;DTSTAMP&#39;</span>] = @date(<span class="stringliteral">&#39;Ymd&#39;</span>) . <span class="charliteral">&#39;T&#39;</span> . @date(<span class="stringliteral">&#39;His&#39;</span>);
<a name="l00092"></a>00092   $a[<span class="stringliteral">&#39;METHOD&#39;</span>] = <span class="stringliteral">&quot;REQUEST&quot;</span>;
<a name="l00093"></a>00093   <span class="keywordflow">if</span>(!isset($a[<span class="stringliteral">&#39;UID&#39;</span>]))
<a name="l00094"></a>00094    $a[<span class="stringliteral">&#39;UID&#39;</span>] = md5(@date(<span class="stringliteral">&#39;YmdHis&#39;</span>));
<a name="l00095"></a>00095    
<a name="l00096"></a>00096   $r = <span class="keyword">new</span> <a class="code" href="class_c_m_v_item.html#a3ae0d689000afa717bbc691f759bfcbc" title="Create a CMVItem of a given type.">CMVItem</a>(<span class="stringliteral">&quot;VEVENT&quot;</span>);
<a name="l00097"></a>00097   <span class="keywordflow">foreach</span>($a as $k =&gt; $v)
<a name="l00098"></a>00098    $r-&gt;addAttribute($k, $v);
<a name="l00099"></a>00099   
<a name="l00100"></a>00100   <span class="keywordflow">return</span> $r;
<a name="l00101"></a>00101  }
<a name="l00102"></a>00102  
<a name="l00103"></a>00103 }
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 ?&gt;
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
