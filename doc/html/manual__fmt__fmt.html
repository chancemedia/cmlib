<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CMLIB: 4.2. Formatter</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="manual.html">Manual</a>&nbsp;&raquo;&nbsp;<a class="el" href="manual__fmt.html">4. Data Processing</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="manual_fmt_fmt">4.2. Formatter </a></h1><h2><a class="anchor" id="manual_fmt_cfmt_contents">
Contents</a></h2>
<ol type="1">
<li><a class="el" href="manual__fmt__fmt.html#manual_fmt_fmt_intro">Introduction</a></li>
<li><a class="el" href="manual__fmt__fmt.html#manual_fmt_fmt_options">Options</a></li>
<li><a class="el" href="manual__fmt__fmt.html#manual_fmt_fmt_date">Date formatting</a></li>
<li><a class="el" href="manual__fmt__fmt.html#manual_fmt_fmt_money">Currency formatting</a></li>
<li><a class="el" href="manual__fmt__fmt.html#manual_fmt_fmt_percent">Percentage formatting</a></li>
<li><a class="el" href="manual__fmt__fmt.html#manual_fmt_fmt_bytes">Bytes formatting</a></li>
<li><a class="el" href="manual__fmt__fmt.html#manual_fmt_fmt_multi">Multicolumn formatter</a></li>
<li><a class="el" href="manual__fmt__fmt.html#manual_fmt_fmt_db">Formatting Directly From a Database Query</a></li>
</ol>
<h2><a class="anchor" id="manual_fmt_fmt_intro">
Introduction</a></h2>
<p>The <a class="el" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a> makes it easy and consistant to format many types of data. The basic syntax: </p>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(type, options);
</pre></div><p>Where <code>code</code> can be one of:</p>
<ol type="1">
<li><code>'number'</code> for raw numerical formating, this including formatting currency.</li>
<li><code>'timestamp'</code> for formatting dates and times.</li>
<li><code>'bytes'</code> for data size formatting.</li>
</ol>
<p>And <code>options</code> can be a single string, or associative array of options for the formatter.</p>
<p><b>Tip:</b> you can replace an array of options with a key-value string split by pipes. The following example: </p>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(<span class="stringliteral">&#39;number&#39;</span>, array(<span class="stringliteral">&#39;fixed&#39;</span> =&gt; 2, <span class="stringliteral">&#39;thousands&#39;</span> =&gt; <span class="charliteral">&#39;,&#39;</span>, <span class="stringliteral">&#39;pre&#39;</span> =&gt; <span class="charliteral">&#39;$&#39;</span>));
</pre></div><p> Will do the same as: </p>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(<span class="stringliteral">&#39;number&#39;</span>, <span class="stringliteral">&#39;fixed=2|thousands=,|pre=$&#39;</span>));
</pre></div><h2><a class="anchor" id="manual_fmt_fmt_options">
Options</a></h2>
<table class="doxtable">
<tr>
<th>Option </th><th>Applies to </th><th>Default </th><th>Notes  </th></tr>
<tr>
<td><code>'date'</code> </td><td><code>timestamp</code> </td><td><code>''</code> </td><td>The date format specified using the same options as the native PHP date() function.  </td></tr>
<tr>
<td><code>'dec'</code> </td><td><code>number</code> </td><td><code>'.'</code> </td><td>The decimal point character or string.  </td></tr>
<tr>
<td><code>'fixed'</code> </td><td><code>number</code> </td><td><code>false</code> </td><td>Fixed precision. The value to provide is the number of decimal places to be fixed to. For example 3.4 fixed to 3 decimal places is 3.400  </td></tr>
<tr>
<td><code>'html'</code> </td><td><code>boolean</code> </td><td><code>false</code> </td><td>If this option is set to <span style="color: MediumBlue"><code>true</code></span> the formatter will escape the result so that it is safe to use in HTML.  </td></tr>
<tr>
<td><code>'mul'</code> </td><td><code>number</code> </td><td><code>1.0</code> </td><td>The multiplier will multiple the raw value before formatting it, this is helpful for dealing with percentages where 0.05 represents 5%.  </td></tr>
<tr>
<td><code>'post'</code> </td><td><code>timestamp</code>, <code>number</code>, <code>bytes</code> </td><td><code>''</code> </td><td>The character or string to place after the formatted result.  </td></tr>
<tr>
<td><code>'pre'</code> </td><td><code>timestamp</code>, <code>number</code>, <code>bytes</code> </td><td><code>''</code> </td><td>The character or string to place before the formatted result.  </td></tr>
<tr>
<td><code>'prec'</code> </td><td><code>number</code> </td><td><code>false</code> </td><td>Variable width precision (i.e. up to this many places if needed) use this or <code>'fixed'</code> they cannot be used together. Supply the the number of maximum places of precision. If the raw number contains more precision than <code>'prec'</code> the number will be rounded for the result.  </td></tr>
<tr>
<td><code>'sizes'</code> </td><td><code>bytes</code> </td><td><code>' bytes; KB; MB; GB; TB; PB; EB; ZB; YB'</code> </td><td>When formatting data size you can specify the extension of each power of the <code>'unit'</code> to be appended after the value.  </td></tr>
<tr>
<td><code>'thousands'</code> </td><td><code>number</code>, <code>bytes</code> </td><td><code>''</code> </td><td>Thousands separator.  </td></tr>
<tr>
<td><code>'type'</code> </td><td>N/A </td><td>None </td><td>This is an internal place holder for the <code>type</code> specified in the first argument of the constructor, you should not modify or set this manually but i'll document it here anyway.  </td></tr>
<tr>
<td><code>'unit'</code> </td><td><code>bytes</code> </td><td><code>1000</code> </td><td>The magnitude of each data size step. You may want to choose <code>1024</code> as an alternative value.  </td></tr>
</table>
<h2><a class="anchor" id="manual_fmt_fmt_date">
Date formatting</a></h2>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(<span class="stringliteral">&#39;timestamp&#39;</span>, <span class="stringliteral">&#39;F j, Y, g:i a&#39;</span>);
 echo $f-&gt;format(1269298400)            <span class="comment">// &#39;March 23, 2010, 9:53 am&#39;</span>
 echo $f-&gt;format(<span class="stringliteral">&quot;2010-03-05 12:43:05&quot;</span>) <span class="comment">// &#39;March 5, 2010, 12:43 pm&#39;</span>
</pre></div><h2><a class="anchor" id="manual_fmt_fmt_money">
Currency formatting</a></h2>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(<span class="stringliteral">&#39;number&#39;</span>, array(<span class="stringliteral">&#39;fixed&#39;</span> =&gt; 2, <span class="stringliteral">&#39;thousands&#39;</span> =&gt; <span class="charliteral">&#39;,&#39;</span>, <span class="stringliteral">&#39;pre&#39;</span> =&gt; <span class="charliteral">&#39;$&#39;</span>));
 echo $f-&gt;format(5);           <span class="comment">// &#39;$5.00&#39;</span>
 echo $f-&gt;format(<span class="stringliteral">&quot;12347.237&quot;</span>); <span class="comment">// &#39;$12,347.24&#39;</span>
</pre></div><h2><a class="anchor" id="manual_fmt_fmt_percent">
Percentage formatting</a></h2>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(<span class="stringliteral">&#39;number&#39;</span>, array(<span class="stringliteral">&#39;prec&#39;</span> =&gt; 1, <span class="stringliteral">&#39;mul&#39;</span> =&gt; 100, <span class="stringliteral">&#39;post&#39;</span> =&gt; <span class="charliteral">&#39;%&#39;</span>));
 echo $f-&gt;format(0.05);   <span class="comment">// &#39;5%&#39;</span>
 echo $f-&gt;format(1.2343); <span class="comment">// &#39;123.4%&#39;</span>
</pre></div><h2><a class="anchor" id="manual_fmt_fmt_bytes">
Bytes formatting</a></h2>
<p>Example 1: </p>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(<span class="stringliteral">&#39;bytes&#39;</span>);
 echo $f-&gt;format(5000);      <span class="comment">// &#39;5 KB&#39;</span>
 echo $f-&gt;format(512345678); <span class="comment">// &#39;512.4 MB&#39;</span>
</pre></div><p>Example 2: </p>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(<span class="stringliteral">&#39;bytes&#39;</span>, array(<span class="stringliteral">&#39;fixed&#39;</span> =&gt; 2, <span class="stringliteral">&#39;unit&#39;</span> =&gt; 1024,
                      <span class="stringliteral">&#39;sizes&#39;</span> =&gt; <span class="stringliteral">&#39; bytes; KiB; MiB&#39;</span>, <span class="stringliteral">&#39;thousands&#39;</span> =&gt; <span class="charliteral">&#39;,&#39;</span>));
 $f-&gt;format(5000);        <span class="comment">// &#39;4.88 KiB&#39;</span>
 $f-&gt;format(51234567800); <span class="comment">// &#39;48,861.09 MiB&#39;</span>
</pre></div><p>Example 3: </p>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(<span class="stringliteral">&#39;number&#39;</span>, array(<span class="stringliteral">&#39;prec&#39;</span> =&gt; 0, <span class="stringliteral">&#39;mul&#39;</span> =&gt; 0.001, <span class="stringliteral">&#39;post&#39;</span> =&gt; <span class="stringliteral">&#39; KB&#39;</span>,
                     <span class="stringliteral">&#39;thousands&#39;</span> =&gt; <span class="charliteral">&#39;,&#39;</span>));
 $f-&gt;format(7450);        <span class="comment">// &#39;7 KB&#39;</span>
 $f-&gt;format(51234567800); <span class="comment">// &#39;51,234,568 KB&#39;</span>
</pre></div><h2><a class="anchor" id="manual_fmt_fmt_multi">
Multicolumn formatter</a></h2>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(array(
   <span class="stringliteral">&#39;created&#39;</span> =&gt; <span class="stringliteral">&#39;timestamp|F j, Y, g:i a&#39;</span>,
   <span class="stringliteral">&#39;cost&#39;</span> =&gt; <span class="stringliteral">&#39;number|fixed=2|thousands=,|pre=$&#39;</span>
 ));
 $result = $f-&gt;format(array(<span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&quot;Bob Smith&quot;</span>, <span class="stringliteral">&#39;created&#39;</span> =&gt; 1269298400, <span class="stringliteral">&#39;cost&#39;</span> =&gt; 450));
 $result[<span class="stringliteral">&#39;name&#39;</span>];    <span class="comment">// &#39;Bob Smith&#39;</span>
 $result[<span class="stringliteral">&#39;created&#39;</span>]; <span class="comment">// &#39;March 23, 2010, 9:53 am&#39;</span>
 $result[<span class="stringliteral">&#39;cost&#39;</span>];    <span class="comment">// &#39;$450.00&#39;</span>
</pre></div><h2><a class="anchor" id="manual_fmt_fmt_db">
Formatting Directly From a Database Query</a></h2>
<p>This is the most commonly used formatting that is built right into the database query: </p>
<div class="fragment"><pre class="fragment"> $f = <span class="keyword">new</span> <a class="code" href="class_c_m_formatter.html" title="A reuseable data formatter.">CMFormatter</a>(array(
        <span class="stringliteral">&#39;created&#39;</span> =&gt; <span class="stringliteral">&#39;timestamp|F j, Y, g:i a&#39;</span>,
        <span class="stringliteral">&#39;cost&#39;</span> =&gt; <span class="stringliteral">&#39;number|fixed=2|thousands=,|pre=$&#39;</span>
      ));
      
 $q = $dbh-&gt;query(<span class="stringliteral">&quot;select * from mytable where cost&gt;? and productname=?&quot;</span>,
                  array(100, <span class="stringliteral">&#39;Magic Carpet&#39;</span>),    <span class="comment">// bind values</span>
                  array(<span class="stringliteral">&#39;formatter&#39;</span> =&gt; $f));     <span class="comment">// attach formatter</span>
 
 <span class="keywordflow">while</span>($r = $q-&gt;fetch()) {
   print_r($r);
 }
 
 <span class="comment">// Array</span>
 <span class="comment">// (</span>
 <span class="comment">//     [productname] =&gt; Magic Carpet</span>
 <span class="comment">//     [colour] =&gt; Blue</span>
 <span class="comment">//     [created] =&gt; March 5, 2010, 3:35 pm</span>
 <span class="comment">//     [cost] =&gt; $450.00</span>
 <span class="comment">// )</span>
 <span class="comment">// Array</span>
 <span class="comment">// (</span>
 <span class="comment">//     [productname] =&gt; Magic Carpet</span>
 <span class="comment">//     [colour] =&gt; Green</span>
 <span class="comment">//     [created] =&gt; March 10, 2010, 11:52 am</span>
 <span class="comment">//     [cost] =&gt; $429.00</span>
 <span class="comment">// )</span>
</pre></div><p>See more information at <a class="el" href="manual__databases__fmt.html">5.8. Formatter</a>. </p>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
