<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CMLIB: CMForm.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>CMForm.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 include_once(<span class="stringliteral">&quot;CMClass.php&quot;</span>);
<a name="l00004"></a>00004 include_once(<span class="stringliteral">&quot;CMMySQL.php&quot;</span>);
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="comment">// some change</span>
<a name="l00007"></a>00007 
<a name="l00018"></a><a class="code" href="class_c_m_form.html">00018</a> <span class="keyword">class </span><a class="code" href="class_c_m_form.html" title="HTML form object builder.">CMForm</a> <span class="keyword">implements</span> <a class="code" href="interface_c_m_class.html" title="CM class interface.">CMClass</a> {
<a name="l00019"></a>00019  
<a name="l00025"></a><a class="code" href="class_c_m_form.html#a9e2d53558e7b299d52b25c13d310d7e0">00025</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a9e2d53558e7b299d52b25c13d310d7e0" title="The version of this class.">Version</a>() {
<a name="l00026"></a>00026   <span class="keywordflow">return</span> <span class="stringliteral">&quot;1.0&quot;</span>;
<a name="l00027"></a>00027  }
<a name="l00028"></a>00028  
<a name="l00034"></a><a class="code" href="class_c_m_form.html#ab51e04ce58ff27601a503f46d611b7e6">00034</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#ab51e04ce58ff27601a503f46d611b7e6" title="The version this class was introduced to the library.">Since</a>() {
<a name="l00035"></a>00035   <span class="keywordflow">return</span> <span class="stringliteral">&quot;1.0&quot;</span>;
<a name="l00036"></a>00036  }
<a name="l00037"></a>00037  
<a name="l00047"></a><a class="code" href="class_c_m_form.html#a099e4017f35f6b68f2eadeb8497a954c">00047</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a099e4017f35f6b68f2eadeb8497a954c" title="Escape double-quotes for HTML attribute value.">HTMLEscape</a>($str) {
<a name="l00048"></a>00048   <span class="keywordflow">return</span> str_replace(<span class="charliteral">&#39;&quot;&#39;</span>, <span class="stringliteral">&#39;&amp;quot;&#39;</span>, $str);
<a name="l00049"></a>00049  }
<a name="l00050"></a>00050  
<a name="l00060"></a><a class="code" href="class_c_m_form.html#a45099772beda49af1a9a9c2c2ec6032e">00060</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a45099772beda49af1a9a9c2c2ec6032e" title="Internal function for recursing an array to remove slashes.">StripSlashesRecursive</a>($value) {
<a name="l00061"></a>00061   <span class="keywordflow">if</span>(is_array($value)) {
<a name="l00062"></a>00062    <span class="keywordflow">foreach</span>($value as $k =&gt; $v)
<a name="l00063"></a>00063     $value[$k] = <a class="code" href="class_c_m_form.html#a45099772beda49af1a9a9c2c2ec6032e" title="Internal function for recursing an array to remove slashes.">CMForm::StripSlashesRecursive</a>($v);
<a name="l00064"></a>00064   }
<a name="l00065"></a>00065   <span class="keywordflow">else</span>
<a name="l00066"></a>00066    $value = stripslashes($value);
<a name="l00067"></a>00067   
<a name="l00068"></a>00068   <span class="keywordflow">return</span> $value;
<a name="l00069"></a>00069  }
<a name="l00070"></a>00070  
<a name="l00083"></a><a class="code" href="class_c_m_form.html#acdab04c27e05279acb646abd5eec242b">00083</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#acdab04c27e05279acb646abd5eec242b" title="Get the safe value of posted form object.">Request</a>($objname) {
<a name="l00084"></a>00084   <span class="keywordflow">return</span> <a class="code" href="class_c_m_form.html#a45099772beda49af1a9a9c2c2ec6032e" title="Internal function for recursing an array to remove slashes.">CMForm::StripSlashesRecursive</a>($_REQUEST[$objname]);
<a name="l00085"></a>00085  }
<a name="l00086"></a>00086 
<a name="l00095"></a><a class="code" href="class_c_m_form.html#a287dc451ffa7a46f65aa8228aabf9bb6">00095</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a287dc451ffa7a46f65aa8228aabf9bb6" title="Works like Request() but only fetches data from $_GET.">Get</a>($objname) {
<a name="l00096"></a>00096   <span class="keywordflow">return</span> <a class="code" href="class_c_m_form.html#a45099772beda49af1a9a9c2c2ec6032e" title="Internal function for recursing an array to remove slashes.">CMForm::StripSlashesRecursive</a>($_GET[$objname]);
<a name="l00097"></a>00097  }
<a name="l00098"></a>00098 
<a name="l00107"></a><a class="code" href="class_c_m_form.html#a32d5f01edafc0d7ed1c2537ddfc6d808">00107</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a32d5f01edafc0d7ed1c2537ddfc6d808" title="Works like Request() but only fetches data from $_POST.">Post</a>($objname) {
<a name="l00108"></a>00108   <span class="keywordflow">return</span> <a class="code" href="class_c_m_form.html#a45099772beda49af1a9a9c2c2ec6032e" title="Internal function for recursing an array to remove slashes.">CMForm::StripSlashesRecursive</a>($_POST[$objname]);
<a name="l00109"></a>00109  }
<a name="l00110"></a>00110  
<a name="l00121"></a><a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2">00121</a>  <span class="keyword">private</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">DefaultAttributes</a>($a) {
<a name="l00122"></a>00122   <span class="comment">// firstly it must be an array</span>
<a name="l00123"></a>00123   <span class="keywordflow">if</span>(!is_array($a))
<a name="l00124"></a>00124    $a = array();
<a name="l00125"></a>00125    
<a name="l00126"></a>00126   $defaults = array(
<a name="l00127"></a>00127    <span class="stringliteral">&#39;caption&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00128"></a>00128    <span class="stringliteral">&#39;captionempty&#39;</span> =&gt; <span class="stringliteral">&quot;&quot;</span>,
<a name="l00129"></a>00129    <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00130"></a>00130    <span class="stringliteral">&#39;custom&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00131"></a>00131      <span class="stringliteral">&#39;data&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00132"></a>00132    <span class="stringliteral">&#39;disabled&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00133"></a>00133    <span class="stringliteral">&#39;height&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00134"></a>00134    <span class="stringliteral">&#39;html&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00135"></a>00135    <span class="stringliteral">&#39;label&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00136"></a>00136             <span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&quot;&quot;</span>,
<a name="l00137"></a>00137    <span class="stringliteral">&#39;onblur&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00138"></a>00138    <span class="stringliteral">&#39;onchange&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00139"></a>00139    <span class="stringliteral">&#39;onclick&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00140"></a>00140    <span class="stringliteral">&#39;ondblclick&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00141"></a>00141    <span class="stringliteral">&#39;onfocus&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00142"></a>00142    <span class="stringliteral">&#39;onkeydown&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00143"></a>00143    <span class="stringliteral">&#39;onkeypress&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00144"></a>00144    <span class="stringliteral">&#39;onkeyup&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00145"></a>00145    <span class="stringliteral">&#39;onmousedown&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00146"></a>00146    <span class="stringliteral">&#39;onmouseout&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00147"></a>00147    <span class="stringliteral">&#39;onmousemove&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00148"></a>00148    <span class="stringliteral">&#39;onmouseup&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00149"></a>00149    <span class="stringliteral">&#39;onmouseover&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00150"></a>00150    <span class="stringliteral">&#39;onselect&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00151"></a>00151    <span class="stringliteral">&#39;readonly&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00152"></a>00152    <span class="stringliteral">&#39;style&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00153"></a>00153    <span class="stringliteral">&#39;tabindex&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00154"></a>00154    <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&quot;&quot;</span>,
<a name="l00155"></a>00155    <span class="stringliteral">&#39;width&#39;</span> =&gt; <span class="keyword">false</span>,
<a name="l00156"></a>00156    <span class="stringliteral">&#39;wrap&#39;</span> =&gt; <span class="stringliteral">&quot;off&quot;</span>,
<a name="l00157"></a>00157     <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;$name&#39;</span>
<a name="l00158"></a>00158   );
<a name="l00159"></a>00159   
<a name="l00160"></a>00160   <span class="keywordflow">foreach</span>($defaults as $k =&gt; $v) {
<a name="l00161"></a>00161    <span class="keywordflow">if</span>(!isset($a[$k])) {
<a name="l00162"></a>00162     <span class="keywordflow">if</span>(substr($v, 0, 1) == <span class="charliteral">&#39;$&#39;</span>)
<a name="l00163"></a>00163      $a[$k] = $a[substr($v, 1)];
<a name="l00164"></a>00164     <span class="keywordflow">else</span>
<a name="l00165"></a>00165      $a[$k] = $v;
<a name="l00166"></a>00166    }
<a name="l00167"></a>00167   }
<a name="l00168"></a>00168   
<a name="l00169"></a>00169   <span class="comment">// convert SQL queries into data</span>
<a name="l00170"></a>00170   <span class="keywordflow">foreach</span>($a as $k =&gt; $v) {
<a name="l00171"></a>00171    <span class="keywordflow">if</span>($v instanceof <a class="code" href="interface_c_m_query_protocol.html" title="Database query interface.">CMQueryProtocol</a>) {
<a name="l00172"></a>00172     <span class="comment">// some attributes are special and require an array()</span>
<a name="l00173"></a>00173     <span class="keywordflow">if</span>($k == <span class="stringliteral">&#39;data&#39;</span>) {
<a name="l00174"></a>00174      $a[$k] = array();
<a name="l00175"></a>00175      <span class="keywordflow">while</span>(($r = $v-&gt;fetch(<span class="stringliteral">&#39;line&#39;</span>)) !== <span class="keyword">false</span>)
<a name="l00176"></a>00176       $a[$k][] = array($r[0], $r[1]);
<a name="l00177"></a>00177     } <span class="keywordflow">else</span> {
<a name="l00178"></a>00178      $a[$k] = mysql_fetch_row($v);
<a name="l00179"></a>00179      $a[$k] = $a[$k][0];
<a name="l00180"></a>00180     }
<a name="l00181"></a>00181    }
<a name="l00182"></a>00182   }
<a name="l00183"></a>00183   
<a name="l00184"></a>00184   <span class="comment">// now escape them</span>
<a name="l00185"></a>00185   <span class="keywordflow">foreach</span>($a as $k =&gt; $v)
<a name="l00186"></a>00186    $a[$k] = <a class="code" href="class_c_m_form.html#a099e4017f35f6b68f2eadeb8497a954c" title="Escape double-quotes for HTML attribute value.">CMForm::HTMLEscape</a>($v);
<a name="l00187"></a>00187    
<a name="l00188"></a>00188   <span class="keywordflow">return</span> $a;
<a name="l00189"></a>00189  }
<a name="l00190"></a>00190  
<a name="l00201"></a><a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a">00201</a>  <span class="keyword">private</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">MainAttributes</a>($a, $checkbox = <span class="keyword">false</span>) {
<a name="l00202"></a>00202   <span class="keywordflow">if</span>($checkbox)
<a name="l00203"></a>00203    $html = <span class="stringliteral">&quot; name=\&quot;$a[name][]\&quot;&quot;</span>;
<a name="l00204"></a>00204   <span class="keywordflow">else</span>
<a name="l00205"></a>00205    $html = <span class="stringliteral">&quot; name=\&quot;$a[name]\&quot;&quot;</span>;
<a name="l00206"></a>00206   $html .= <span class="stringliteral">&quot; id=\&quot;$a[id]\&quot;&quot;</span>;
<a name="l00207"></a>00207   
<a name="l00208"></a>00208   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;class&#39;</span>])
<a name="l00209"></a>00209    $html .= <span class="stringliteral">&quot; class=\&quot;$a[class]\&quot;&quot;</span>;
<a name="l00210"></a>00210   
<a name="l00211"></a>00211   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onblur&#39;</span>]) 
<a name="l00212"></a>00212    $html .= <span class="stringliteral">&quot; onblur=\&quot;$a[onblur]\&quot;&quot;</span>;
<a name="l00213"></a>00213   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onchange&#39;</span>]) 
<a name="l00214"></a>00214    $html .= <span class="stringliteral">&quot; onchange=\&quot;$a[onchange]\&quot;&quot;</span>;
<a name="l00215"></a>00215   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onclick&#39;</span>]) 
<a name="l00216"></a>00216    $html .= <span class="stringliteral">&quot; onclick=\&quot;$a[onclick]\&quot;&quot;</span>;
<a name="l00217"></a>00217   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;ondblclick&#39;</span>]) 
<a name="l00218"></a>00218    $html .= <span class="stringliteral">&quot; ondblclick=\&quot;$a[ondblclick]\&quot;&quot;</span>;
<a name="l00219"></a>00219   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onfocus&#39;</span>]) 
<a name="l00220"></a>00220    $html .= <span class="stringliteral">&quot; onfocus=\&quot;$a[onfocus]\&quot;&quot;</span>;
<a name="l00221"></a>00221   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onkeydown&#39;</span>]) 
<a name="l00222"></a>00222    $html .= <span class="stringliteral">&quot; onkeydown=\&quot;$a[onkeydown]\&quot;&quot;</span>;
<a name="l00223"></a>00223   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onkeypress&#39;</span>]) 
<a name="l00224"></a>00224    $html .= <span class="stringliteral">&quot; onkeypress=\&quot;$a[onkeypress]\&quot;&quot;</span>;
<a name="l00225"></a>00225   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onkeyup&#39;</span>]) 
<a name="l00226"></a>00226    $html .= <span class="stringliteral">&quot; onkeyup=\&quot;$a[onkeyup]\&quot;&quot;</span>;
<a name="l00227"></a>00227   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onmousedown&#39;</span>]) 
<a name="l00228"></a>00228    $html .= <span class="stringliteral">&quot; onmousedown=\&quot;$a[onmousedown]\&quot;&quot;</span>;
<a name="l00229"></a>00229   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onmouseout&#39;</span>]) 
<a name="l00230"></a>00230    $html .= <span class="stringliteral">&quot; onmouseout=\&quot;$a[onmouseout]\&quot;&quot;</span>;
<a name="l00231"></a>00231   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onmousemove&#39;</span>]) 
<a name="l00232"></a>00232    $html .= <span class="stringliteral">&quot; onmousemove=\&quot;$a[onmousemove]\&quot;&quot;</span>;
<a name="l00233"></a>00233   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onmouseup&#39;</span>]) 
<a name="l00234"></a>00234    $html .= <span class="stringliteral">&quot; onchange=\&quot;$a[onmouseup]\&quot;&quot;</span>;
<a name="l00235"></a>00235   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onmouseover&#39;</span>]) 
<a name="l00236"></a>00236    $html .= <span class="stringliteral">&quot; onmouseover=\&quot;$a[onmouseover]\&quot;&quot;</span>;
<a name="l00237"></a>00237   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;onselect&#39;</span>]) 
<a name="l00238"></a>00238    $html .= <span class="stringliteral">&quot; onselect=\&quot;$a[onselect]\&quot;&quot;</span>;
<a name="l00239"></a>00239   
<a name="l00240"></a>00240   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;style&#39;</span>]) 
<a name="l00241"></a>00241    $html .= <span class="stringliteral">&quot; style=\&quot;$a[style]\&quot;&quot;</span>;
<a name="l00242"></a>00242   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;disabled&#39;</span>]) 
<a name="l00243"></a>00243    $html .= <span class="stringliteral">&quot; disabled=\&quot;disabled\&quot;&quot;</span>;
<a name="l00244"></a>00244   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;readonly&#39;</span>]) 
<a name="l00245"></a>00245    $html .= <span class="stringliteral">&quot; readonly=\&quot;readonly\&quot;&quot;</span>;
<a name="l00246"></a>00246   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;label&#39;</span>]) 
<a name="l00247"></a>00247    $html .= <span class="stringliteral">&quot; label=\&quot;$a[label]\&quot;&quot;</span>;
<a name="l00248"></a>00248   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;tabindex&#39;</span>]) 
<a name="l00249"></a>00249    $html .= <span class="stringliteral">&quot; tabindex=\&quot;$a[tabindex]\&quot;&quot;</span>;
<a name="l00250"></a>00250   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;custom&#39;</span>]) 
<a name="l00251"></a>00251    $html .= <span class="stringliteral">&quot; $a[custom]&quot;</span>;
<a name="l00252"></a>00252   
<a name="l00253"></a>00253   <span class="keywordflow">return</span> $html;
<a name="l00254"></a>00254  }
<a name="l00255"></a>00255  
<a name="l00262"></a><a class="code" href="class_c_m_form.html#adaefe5e02971807c89f7dde072e91769">00262</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#adaefe5e02971807c89f7dde072e91769" title="Create a single line text box.">TextBox</a>($a) {
<a name="l00263"></a>00263   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00264"></a>00264   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;caption&#39;</span>]) {
<a name="l00265"></a>00265    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00266"></a>00266     $a[<span class="stringliteral">&#39;value&#39;</span>] = $a[<span class="stringliteral">&#39;captionempty&#39;</span>];
<a name="l00267"></a>00267    <span class="keywordflow">return</span> $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269   $html = <span class="stringliteral">&quot;&lt;input type=&#39;text&#39;&quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a);
<a name="l00270"></a>00270   $html .= <span class="stringliteral">&#39; value=&quot;&#39;</span> . $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00271"></a>00271   $html .= <span class="stringliteral">&quot; /&gt;&quot;</span>;
<a name="l00272"></a>00272   <span class="keywordflow">return</span> $html;
<a name="l00273"></a>00273  }
<a name="l00274"></a>00274  
<a name="l00280"></a><a class="code" href="class_c_m_form.html#a5541dbf0e2b8b8725ec9a46cbc8feb60">00280</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a5541dbf0e2b8b8725ec9a46cbc8feb60" title="Create a submit button.">SubmitButton</a>($a) {
<a name="l00281"></a>00281   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00282"></a>00282   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;caption&#39;</span>]) {
<a name="l00283"></a>00283    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00284"></a>00284     $a[<span class="stringliteral">&#39;value&#39;</span>] = $a[<span class="stringliteral">&#39;captionempty&#39;</span>];
<a name="l00285"></a>00285    <span class="keywordflow">return</span> $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00286"></a>00286   }
<a name="l00287"></a>00287   
<a name="l00288"></a>00288   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;name&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00289"></a>00289    $a[<span class="stringliteral">&#39;name&#39;</span>] = <span class="stringliteral">&#39;submit&#39;</span>;
<a name="l00290"></a>00290   
<a name="l00291"></a>00291   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00292"></a>00292    $a[<span class="stringliteral">&#39;value&#39;</span>] = <span class="stringliteral">&#39;Submit&#39;</span>;
<a name="l00293"></a>00293   
<a name="l00294"></a>00294   $html = <span class="stringliteral">&quot;&lt;input type=&#39;submit&#39;&quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a);
<a name="l00295"></a>00295   $html .= <span class="stringliteral">&#39; value=&quot;&#39;</span> . $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00296"></a>00296   $html .= <span class="stringliteral">&quot; /&gt;&quot;</span>;
<a name="l00297"></a>00297   <span class="keywordflow">return</span> $html;
<a name="l00298"></a>00298  }
<a name="l00299"></a>00299  
<a name="l00305"></a><a class="code" href="class_c_m_form.html#ac7d9025d6f1d5980b4e2261be6ee2ba4">00305</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#ac7d9025d6f1d5980b4e2261be6ee2ba4" title="Create a form reset button.">ResetButton</a>($a) {
<a name="l00306"></a>00306   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00307"></a>00307   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;caption&#39;</span>]) {
<a name="l00308"></a>00308    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00309"></a>00309     $a[<span class="stringliteral">&#39;value&#39;</span>] = $a[<span class="stringliteral">&#39;captionempty&#39;</span>];
<a name="l00310"></a>00310    <span class="keywordflow">return</span> $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00311"></a>00311   }
<a name="l00312"></a>00312   
<a name="l00313"></a>00313   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;name&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00314"></a>00314    $a[<span class="stringliteral">&#39;name&#39;</span>] = <span class="stringliteral">&#39;submit&#39;</span>;
<a name="l00315"></a>00315   
<a name="l00316"></a>00316   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00317"></a>00317    $a[<span class="stringliteral">&#39;value&#39;</span>] = <span class="stringliteral">&#39;Reset&#39;</span>;
<a name="l00318"></a>00318   
<a name="l00319"></a>00319   $html = <span class="stringliteral">&quot;&lt;input type=&#39;reset&#39;&quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a);
<a name="l00320"></a>00320   $html .= <span class="stringliteral">&#39; value=&quot;&#39;</span> . $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00321"></a>00321   $html .= <span class="stringliteral">&quot; /&gt;&quot;</span>;
<a name="l00322"></a>00322   <span class="keywordflow">return</span> $html;
<a name="l00323"></a>00323  }
<a name="l00324"></a>00324  
<a name="l00332"></a><a class="code" href="class_c_m_form.html#a2fd0a11ea628e68b103b1cef8d0ea99a">00332</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a2fd0a11ea628e68b103b1cef8d0ea99a" title="Create a non-submitting button.">Button</a>($a) {
<a name="l00333"></a>00333   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00334"></a>00334   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;caption&#39;</span>]) {
<a name="l00335"></a>00335    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00336"></a>00336     $a[<span class="stringliteral">&#39;value&#39;</span>] = $a[<span class="stringliteral">&#39;captionempty&#39;</span>];
<a name="l00337"></a>00337    <span class="keywordflow">return</span> $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00338"></a>00338   }
<a name="l00339"></a>00339   
<a name="l00340"></a>00340   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;name&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00341"></a>00341    $a[<span class="stringliteral">&#39;name&#39;</span>] = <span class="stringliteral">&#39;button&#39;</span>;
<a name="l00342"></a>00342   
<a name="l00343"></a>00343   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00344"></a>00344    $a[<span class="stringliteral">&#39;value&#39;</span>] = <span class="stringliteral">&#39;Button&#39;</span>;
<a name="l00345"></a>00345   
<a name="l00346"></a>00346   $html = <span class="stringliteral">&quot;&lt;input type=&#39;button&#39;&quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a);
<a name="l00347"></a>00347   $html .= <span class="stringliteral">&#39; value=&quot;&#39;</span> . $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00348"></a>00348   $html .= <span class="stringliteral">&quot; /&gt;&quot;</span>;
<a name="l00349"></a>00349   <span class="keywordflow">return</span> $html;
<a name="l00350"></a>00350  }
<a name="l00351"></a>00351  
<a name="l00357"></a><a class="code" href="class_c_m_form.html#aacf8b065b9ea18fc98a977be6eb85e13">00357</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#aacf8b065b9ea18fc98a977be6eb85e13" title="Create a hidden field.">Hidden</a>($a) {
<a name="l00358"></a>00358   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00359"></a>00359   $html = <span class="stringliteral">&quot;&lt;input type=&#39;hidden&#39;&quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a);
<a name="l00360"></a>00360   $html .= <span class="stringliteral">&#39; value=&quot;&#39;</span> . $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00361"></a>00361   $html .= <span class="stringliteral">&quot; /&gt;&quot;</span>;
<a name="l00362"></a>00362   <span class="keywordflow">return</span> $html;
<a name="l00363"></a>00363  }
<a name="l00364"></a>00364  
<a name="l00370"></a><a class="code" href="class_c_m_form.html#a3cfe321b6ef9794e10a6bc86f7055989">00370</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a3cfe321b6ef9794e10a6bc86f7055989" title="Create a password box.">PasswordBox</a>($a) {
<a name="l00371"></a>00371   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00372"></a>00372   $html = <span class="stringliteral">&quot;&lt;input type=&#39;password&#39;&quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a);
<a name="l00373"></a>00373   $html .= <span class="stringliteral">&#39; value=&quot;&#39;</span> . $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00374"></a>00374   $html .= <span class="stringliteral">&quot; /&gt;&quot;</span>;
<a name="l00375"></a>00375   <span class="keywordflow">return</span> $html;
<a name="l00376"></a>00376  }
<a name="l00377"></a>00377  
<a name="l00383"></a><a class="code" href="class_c_m_form.html#a15f48d56db687516bbbf67e201034e70">00383</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a15f48d56db687516bbbf67e201034e70" title="Create a popup menu.">Menu</a>($a) {
<a name="l00384"></a>00384   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00385"></a>00385   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;caption&#39;</span>]) {
<a name="l00386"></a>00386    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00387"></a>00387     $a[<span class="stringliteral">&#39;value&#39;</span>] = $a[<span class="stringliteral">&#39;captionempty&#39;</span>];
<a name="l00388"></a>00388    <span class="keywordflow">return</span> $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00389"></a>00389   }
<a name="l00390"></a>00390   $html = <span class="stringliteral">&quot;&lt;select &quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a) . <span class="stringliteral">&quot;&gt;&quot;</span>;
<a name="l00391"></a>00391   
<a name="l00392"></a>00392   <span class="keywordflow">if</span>(isset($a[<span class="stringliteral">&#39;data&#39;</span>]) &amp;&amp; is_array($a[<span class="stringliteral">&#39;data&#39;</span>])) {
<a name="l00393"></a>00393    <span class="keywordflow">foreach</span>($a[<span class="stringliteral">&#39;data&#39;</span>] as $d) {
<a name="l00394"></a>00394     <span class="keywordflow">if</span>(!is_array($d))
<a name="l00395"></a>00395      $d = array($d, $d);
<a name="l00396"></a>00396     $html .= <span class="stringliteral">&#39;&lt;option value=&quot;&#39;</span> . $d[0] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00397"></a>00397     <span class="keywordflow">if</span>($d[0] == $a[<span class="stringliteral">&#39;value&#39;</span>])
<a name="l00398"></a>00398      $html .= <span class="stringliteral">&#39; selected&#39;</span>;
<a name="l00399"></a>00399     $html .= <span class="charliteral">&#39;&gt;&#39;</span>;
<a name="l00400"></a>00400     <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;html&#39;</span>] === <span class="keyword">false</span>)
<a name="l00401"></a>00401      $html .= htmlspecialchars($d[1]);
<a name="l00402"></a>00402     <span class="keywordflow">else</span>
<a name="l00403"></a>00403      $html .= $d[1];
<a name="l00404"></a>00404     $html .= <span class="stringliteral">&#39;&lt;/option&gt;&#39;</span>;
<a name="l00405"></a>00405    }
<a name="l00406"></a>00406   }
<a name="l00407"></a>00407   
<a name="l00408"></a>00408   $html .= <span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>;
<a name="l00409"></a>00409   <span class="keywordflow">return</span> $html;
<a name="l00410"></a>00410  }
<a name="l00411"></a>00411  
<a name="l00417"></a><a class="code" href="class_c_m_form.html#a117240abe236a0c688f484289fa677d4">00417</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a117240abe236a0c688f484289fa677d4" title="Create a checkbox.">Checkbox</a>($a) {
<a name="l00418"></a>00418   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00419"></a>00419   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;caption&#39;</span>]) {
<a name="l00420"></a>00420    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00421"></a>00421     $a[<span class="stringliteral">&#39;value&#39;</span>] = $a[<span class="stringliteral">&#39;captionempty&#39;</span>];
<a name="l00422"></a>00422    <span class="keywordflow">return</span> $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00423"></a>00423   }
<a name="l00424"></a>00424   $html = <span class="stringliteral">&quot;&lt;input type=&#39;checkbox&#39; value=&#39;&quot;</span> . $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&quot;&#39; &quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a);
<a name="l00425"></a>00425   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;checked&#39;</span>] != <span class="keyword">false</span>)
<a name="l00426"></a>00426    $html .= <span class="stringliteral">&#39; checked&#39;</span>;
<a name="l00427"></a>00427   $html .= <span class="stringliteral">&quot; /&gt;&quot;</span>;
<a name="l00428"></a>00428   <span class="keywordflow">return</span> $html;
<a name="l00429"></a>00429  }
<a name="l00430"></a>00430  
<a name="l00436"></a><a class="code" href="class_c_m_form.html#a4bc73067e9cc052d2888596fe868868b">00436</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a4bc73067e9cc052d2888596fe868868b" title="Create a list box.">ListBox</a>($a) {
<a name="l00437"></a>00437   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00438"></a>00438   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;height&#39;</span>] === <span class="keyword">false</span>)
<a name="l00439"></a>00439    $a[<span class="stringliteral">&#39;height&#39;</span>] = 5;
<a name="l00440"></a>00440   $html = <span class="stringliteral">&quot;&lt;select &quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a) . <span class="stringliteral">&#39; size=&quot;&#39;</span> . $a[<span class="stringliteral">&#39;height&#39;</span>] . <span class="stringliteral">&#39;&quot;&gt;&#39;</span>;
<a name="l00441"></a>00441   <span class="keywordflow">foreach</span>($a[<span class="stringliteral">&#39;data&#39;</span>] as $value =&gt; $text) {
<a name="l00442"></a>00442    $html .= <span class="stringliteral">&#39;&lt;option value=&quot;&#39;</span> . $value . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00443"></a>00443    <span class="keywordflow">if</span>($value == $a[<span class="stringliteral">&#39;value&#39;</span>])
<a name="l00444"></a>00444     $html .= <span class="stringliteral">&#39; selected&#39;</span>;
<a name="l00445"></a>00445    $html .= <span class="charliteral">&#39;&gt;&#39;</span>;
<a name="l00446"></a>00446    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;html&#39;</span>] === <span class="keyword">false</span>)
<a name="l00447"></a>00447     $html .= htmlspecialchars($text);
<a name="l00448"></a>00448    <span class="keywordflow">else</span>
<a name="l00449"></a>00449     $html .= $text;
<a name="l00450"></a>00450    $html .= <span class="stringliteral">&#39;&lt;/option&gt;&#39;</span>;
<a name="l00451"></a>00451   }
<a name="l00452"></a>00452   $html .= <span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>;
<a name="l00453"></a>00453   <span class="keywordflow">return</span> $html;
<a name="l00454"></a>00454  }
<a name="l00455"></a>00455  
<a name="l00461"></a><a class="code" href="class_c_m_form.html#a59a84e7f3e9db3ffada7c36e8111a0ae">00461</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a59a84e7f3e9db3ffada7c36e8111a0ae" title="Create a radio button set.">RadioGroup</a>($a) {
<a name="l00462"></a>00462   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00463"></a>00463   $html = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00464"></a>00464   <span class="keywordflow">foreach</span>($a[<span class="stringliteral">&#39;data&#39;</span>] as $value =&gt; $text) {
<a name="l00465"></a>00465    $html .= <span class="stringliteral">&#39;&lt;input type=&quot;radio&quot; value=&quot;&#39;</span> . $value . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00466"></a>00466    <span class="keywordflow">if</span>($value == $a[<span class="stringliteral">&#39;value&#39;</span>])
<a name="l00467"></a>00467     $html .= <span class="stringliteral">&#39; checked&#39;</span>;
<a name="l00468"></a>00468    $html .= <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a) . <span class="stringliteral">&#39; /&gt;&#39;</span>;
<a name="l00469"></a>00469    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;html&#39;</span>] === <span class="keyword">false</span>)
<a name="l00470"></a>00470     $html .= htmlspecialchars($text);
<a name="l00471"></a>00471    <span class="keywordflow">else</span>
<a name="l00472"></a>00472     $html .= $text;
<a name="l00473"></a>00473    $html .= <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00474"></a>00474   }
<a name="l00475"></a>00475   <span class="keywordflow">return</span> $html;
<a name="l00476"></a>00476  }
<a name="l00477"></a>00477  
<a name="l00483"></a><a class="code" href="class_c_m_form.html#ab76da49fb3531d1e087abdfbfaf5465b">00483</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#ab76da49fb3531d1e087abdfbfaf5465b" title="Create a checkbox set.">CheckboxGroup</a>($a) {
<a name="l00484"></a>00484   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00485"></a>00485   $html = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00486"></a>00486   <span class="keywordflow">foreach</span>($a[<span class="stringliteral">&#39;data&#39;</span>] as $value =&gt; $text) {
<a name="l00487"></a>00487    $html .= <span class="stringliteral">&#39;&lt;input type=&quot;checkbox&quot; value=&quot;&#39;</span> . $value . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00488"></a>00488    <span class="keywordflow">if</span>(is_array($a[<span class="stringliteral">&#39;value&#39;</span>]) &amp;&amp; in_array($value, $a[<span class="stringliteral">&#39;value&#39;</span>]))
<a name="l00489"></a>00489      $html .= <span class="stringliteral">&#39; checked&#39;</span>;
<a name="l00490"></a>00490    elseif($value == $a[<span class="stringliteral">&#39;value&#39;</span>])
<a name="l00491"></a>00491     $html .= <span class="stringliteral">&#39; checked&#39;</span>;
<a name="l00492"></a>00492    $html .= <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a, <span class="keyword">true</span>) . <span class="stringliteral">&#39; /&gt;&#39;</span>;
<a name="l00493"></a>00493    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;html&#39;</span>] === <span class="keyword">false</span>)
<a name="l00494"></a>00494     $html .= htmlspecialchars($text);
<a name="l00495"></a>00495    <span class="keywordflow">else</span>
<a name="l00496"></a>00496     $html .= $text;
<a name="l00497"></a>00497    $html .= <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00498"></a>00498   }
<a name="l00499"></a>00499   <span class="keywordflow">return</span> $html;
<a name="l00500"></a>00500  }
<a name="l00501"></a>00501  
<a name="l00507"></a><a class="code" href="class_c_m_form.html#a86d2d20ed424da849ed44b1636ebe51e">00507</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a86d2d20ed424da849ed44b1636ebe51e" title="Create a text area.">TextArea</a>($a) {
<a name="l00508"></a>00508   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00509"></a>00509   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;caption&#39;</span>]) {
<a name="l00510"></a>00510    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00511"></a>00511     $a[<span class="stringliteral">&#39;value&#39;</span>] = $a[<span class="stringliteral">&#39;captionempty&#39;</span>];
<a name="l00512"></a>00512    <span class="keywordflow">return</span> nl2br($a[<span class="stringliteral">&#39;value&#39;</span>]) . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00513"></a>00513   }
<a name="l00514"></a>00514   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;height&#39;</span>] === <span class="keyword">false</span>)
<a name="l00515"></a>00515    $a[<span class="stringliteral">&#39;height&#39;</span>] = 5;
<a name="l00516"></a>00516   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;width&#39;</span>] === <span class="keyword">false</span>)
<a name="l00517"></a>00517    $a[<span class="stringliteral">&#39;width&#39;</span>] = 45;
<a name="l00518"></a>00518   $html = <span class="stringliteral">&quot;&lt;textarea&quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a) . <span class="stringliteral">&quot; rows=\&quot;$a[height]\&quot; cols=\&quot;$a[width]\&quot; wrap=\&quot;$a[wrap]\&quot;&gt;&quot;</span>;
<a name="l00519"></a>00519   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;html&#39;</span>] === <span class="keyword">false</span>)
<a name="l00520"></a>00520    $html .= htmlspecialchars($a[<span class="stringliteral">&#39;value&#39;</span>]);
<a name="l00521"></a>00521   <span class="keywordflow">else</span>
<a name="l00522"></a>00522    $html .= $a[<span class="stringliteral">&#39;value&#39;</span>];
<a name="l00523"></a>00523   $html .= <span class="stringliteral">&quot;&lt;/textarea&gt;&quot;</span>;
<a name="l00524"></a>00524   <span class="keywordflow">return</span> $html;
<a name="l00525"></a>00525  }
<a name="l00526"></a>00526  
<a name="l00533"></a><a class="code" href="class_c_m_form.html#a65e67db547eda9b893b3eae796ec220b">00533</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a65e67db547eda9b893b3eae796ec220b" title="File upload box.">FileBox</a>($a) {
<a name="l00534"></a>00534   $a = <a class="code" href="class_c_m_form.html#a77095fc1d8caf53231bbf582ecea7da2" title="Internal use.">CMForm::DefaultAttributes</a>($a);
<a name="l00535"></a>00535   <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;caption&#39;</span>]) {
<a name="l00536"></a>00536    <span class="keywordflow">if</span>($a[<span class="stringliteral">&#39;value&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>)
<a name="l00537"></a>00537     $a[<span class="stringliteral">&#39;value&#39;</span>] = $a[<span class="stringliteral">&#39;captionempty&#39;</span>];
<a name="l00538"></a>00538    <span class="keywordflow">return</span> $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;
<a name="l00539"></a>00539   }
<a name="l00540"></a>00540   $html = <span class="stringliteral">&quot;&lt;input type=&#39;file&#39;&quot;</span> . <a class="code" href="class_c_m_form.html#aa45f1e3455190bd74f66db5ef417d93a" title="Internal use.">CMForm::MainAttributes</a>($a);
<a name="l00541"></a>00541   $html .= <span class="stringliteral">&#39; value=&quot;&#39;</span> . $a[<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00542"></a>00542   $html .= <span class="stringliteral">&quot; /&gt;&quot;</span>;
<a name="l00543"></a>00543   <span class="keywordflow">return</span> $html;
<a name="l00544"></a>00544  }
<a name="l00545"></a>00545  
<a name="l00570"></a><a class="code" href="class_c_m_form.html#a775f5d970f77bcbdf26d8c2cd180c94e">00570</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a775f5d970f77bcbdf26d8c2cd180c94e" title="Return true if a file si ready to be uploaded.">CatchUpload</a>($name = <span class="stringliteral">&#39;upload&#39;</span>) {
<a name="l00571"></a>00571   <span class="keywordflow">return</span> @$_FILES[$name][<span class="stringliteral">&#39;tmp_name&#39;</span>] != <span class="stringliteral">&#39;&#39;</span>;
<a name="l00572"></a>00572  }
<a name="l00573"></a>00573  
<a name="l00582"></a><a class="code" href="class_c_m_form.html#ae5ecafb647a35260ceecd00f5d9cdbc4">00582</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#ae5ecafb647a35260ceecd00f5d9cdbc4" title="Move an temp uploaded file to a perminant location.">SaveUploadFile</a>($destination, $name = <span class="stringliteral">&#39;upload&#39;</span>) {
<a name="l00583"></a>00583   <span class="keywordflow">return</span> move_uploaded_file($_FILES[$name][<span class="stringliteral">&#39;tmp_name&#39;</span>], $destination);
<a name="l00584"></a>00584  }
<a name="l00585"></a>00585  
<a name="l00594"></a><a class="code" href="class_c_m_form.html#a910ae54f15b91cd645e1123b60d188e9">00594</a>  <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_c_m_form.html#a910ae54f15b91cd645e1123b60d188e9" title="Return the extension of the uploaded file (not including the dot.).">UploadFileExtension</a>($name = <span class="stringliteral">&#39;upload&#39;</span>) {
<a name="l00595"></a>00595   $r = $_FILES[$name][<span class="stringliteral">&#39;name&#39;</span>];
<a name="l00596"></a>00596   $pos = strpos($r, <span class="charliteral">&#39;.&#39;</span>);
<a name="l00597"></a>00597   <span class="keywordflow">if</span>($pos === <span class="keyword">false</span>)
<a name="l00598"></a>00598    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00599"></a>00599   <span class="keywordflow">return</span> strtolower(substr($r, $pos + 1));
<a name="l00600"></a>00600  }
<a name="l00601"></a>00601  
<a name="l00605"></a><a class="code" href="class_c_m_form.html#a7516ca30af0db3cdbf9a7739b48ce91d">00605</a>  <span class="keyword">public</span> function <a class="code" href="class_c_m_form.html#a7516ca30af0db3cdbf9a7739b48ce91d" title="Return the string value of this object.">__toString</a>() {
<a name="l00606"></a>00606   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;&quot;</span> . get_class($this) . <span class="stringliteral">&quot;&gt;&quot;</span>;
<a name="l00607"></a>00607  }
<a name="l00608"></a>00608  
<a name="l00609"></a>00609 }
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 ?&gt;
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
